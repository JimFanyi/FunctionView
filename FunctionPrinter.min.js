!function(t,_){"object"==typeof exports&&"undefined"!=typeof module?module.exports=_():"function"==typeof define&&define.amd?define(_):t.FunctionPrinter=_()}(this,function(){function t(t,_){this.__cvs=null,this.__ctx=null,this.Init(t,_)}return t.prototype.SetBackground=function(){this.__ctx.fillStyle=this.__cvs_backgound_color,this.__ctx.fillRect(0,0,this.__cvs_wdt,this.__cvs_hgt)},t.prototype.DrawAxis=function(){[[this.__start_point[0],0,this.__cvs_axis_opts.y.color,this.__cvs_axis_opts.y.width],[this.__start_point[0],this.__cvs_hgt,this.__cvs_axis_opts.y.color,this.__cvs_axis_opts.y.width],[0,this.__start_point[1],this.__cvs_axis_opts.x.color,this.__cvs_axis_opts.x.width],[this.__cvs_wdt,this.__start_point[1],this.__cvs_axis_opts.x.color,this.__cvs_axis_opts.x.width]].forEach(t=>{this.__ctx.beginPath(),this.__ctx.strokeStyle=t[2],this.__ctx.lineWidth=t[3],this.__ctx.moveTo(this.__start_point[0],this.__start_point[1]),this.__ctx.lineTo(t[0],t[1]),this.__ctx.stroke(),this.__ctx.closePath()})},t.prototype.DrawMark=function(e,i,s,n){var o=this.__cvs_mark_opts,a=o.x.accuracy,c=o.y.accuracy;this.__ctx.font=o.y.font.size+"px "+o.y.font.family,this.__ctx.lineWidth=o.y.line.lineWidth,this.__ctx.textBaseline="middle",this.__ctx.textBaseline="center";for(let t=0<i?this.__start_point_values[1]-+c:this.__start_point_values[1],_=(this.__ctx.beginPath(),this.__start_point[1]);0<_;)t+=o.y.accuracy,this.__maximum_point.y[0]=t,_=this.__start_point[1]-Math.abs((t-this.__start_point_values[1])/c*o.y.line.accuracy)+i,this.__ctx.strokeStyle=o.y.line.color,this.__ctx.lineWidth=o.y.line.lineWidth,this.__ctx.moveTo(this.__start_point[0]+(0<n?1:-1),_),this.__ctx.lineTo(this.__start_point[0]+n,_),this.__ctx.stroke(),this.__ctx.strokeStyle=o.y.font.color,this.__ctx.lineWidth=o.y.font.weight,this.__ctx.strokeText(t,this.__start_point[0]+n+(0<n?5:-1*this.__ctx.measureText(t).width-5),_);for(let t=i<0?this.__start_point_values[1]+ +c:this.__start_point_values[1],_=this.__start_point[1];_<this.__cvs_hgt;)t-=o.y.accuracy,this.__maximum_point.y[1]=t,_=this.__start_point[1]+Math.abs((t-this.__start_point_values[1])/c*o.y.line.accuracy)+i,this.__ctx.strokeStyle=o.y.line.color,this.__ctx.lineWidth=o.y.line.lineWidth,this.__ctx.moveTo(this.__start_point[0]+(0<n?1:-1),_),this.__ctx.lineTo(this.__start_point[0]+n,_),this.__ctx.stroke(),this.__ctx.strokeStyle=o.y.font.color,this.__ctx.lineWidth=o.y.font.weight,this.__ctx.strokeText(t,this.__start_point[0]+n+(0<n?5:-1*this.__ctx.measureText(t).width-5),_);this.__ctx.closePath(),this.__ctx.font=o.x.font.size+"px "+o.x.font.family;for(let t=0<e?this.__start_point_values[0]+ +a:this.__start_point_values[0],_=(this.__ctx.beginPath(),this.__start_point[1]);0<_;)t-=o.x.accuracy,this.__maximum_point.x[1]=t,_=this.__start_point[0]-Math.abs((t-this.__start_point_values[0])/a*o.x.line.accuracy)+e,this.__ctx.strokeStyle=o.x.line.color,this.__ctx.lineWidth=o.x.line.lineWidth,this.__ctx.moveTo(_,this.__start_point[1]+(0<s?1:-1)),this.__ctx.lineTo(_,this.__start_point[1]-s),this.__ctx.stroke(),this.__ctx.strokeStyle=o.x.font.color,this.__ctx.lineWidth=o.x.font.weight,this.__ctx.strokeText(t,_-this.__ctx.measureText(t).width/2,this.__start_point[1]-s+(0<s?-10:10));for(let t=e<0?this.__start_point_values[0]-+a:this.__start_point_values[0],_=this.__start_point[0];_<this.__cvs_wdt;)t+=o.x.accuracy,this.__maximum_point.x[0]=t,_=this.__start_point[0]+Math.abs((t-this.__start_point_values[0])/a*o.x.line.accuracy)+e,this.__ctx.strokeStyle=o.x.line.color,this.__ctx.lineWidth=o.x.line.lineWidth,this.__ctx.moveTo(_,this.__start_point[1]+(0<s?1:-1)),this.__ctx.lineTo(_,this.__start_point[1]-s),this.__ctx.stroke(),this.__ctx.strokeStyle=o.x.font.color,this.__ctx.lineWidth=o.x.font.weight,this.__ctx.strokeText(t,_-this.__ctx.measureText(t).width/2,this.__start_point[1]-s+(0<s?-10:10));this.__ctx.closePath(),this.__ctx.strokeText("O",this.__start_point[0]+(0<=e?-15:15),this.__start_point[1]+(i<=0?15:-15))},t.prototype.ParseParams=function(t){let _=(t=t||{}).axis||{},e=t.mark||{},i=t.zoom||{},s=t.events||[],n=t.points||null,o=t.tipline||null;if(e.x=e.x||{},e.y=e.y||{},_.x=_.x||{},_.y=_.y||{},e.x.line=e.x.line||{},e.y.line=e.y.line||{},e.x.font=e.x.font||{},e.y.font=e.y.font||{},this.__cvs_accuracy=t.accuracy||.1,this.__cvs_backgound_color=t.backgroundColor||"#ffffff",this.__cvs_axis_opts={x:{color:_.x.color||"#000000",width:_.x.lineWidth||1.5},y:{color:_.y.color||"#000000",width:_.y.lineWidth||1.5}},this.__cvs_mark_opts={x:{line:{accuracy:e.x.line.accuracy||30,lineWidth:e.x.line.lineWidth||1.5,width:e.x.line.width||10,color:e.x.line.color||"#000000"},font:{size:e.x.font.size||14,color:e.x.font.color||"#000000",family:e.x.font.family||"微软雅黑",weight:e.x.font.weight||1.5},accuracy:e.x.accuracy||1},y:{line:{accuracy:e.y.line.accuracy||30,lineWidth:e.y.line.lineWidth||1.5,width:e.y.line.width||10,color:e.y.line.color||"#000000"},font:{size:e.y.font.size||14,color:e.y.font.color||"#000000",family:e.y.font.family||"微软雅黑",weight:e.y.font.weight||1.5},accuracy:e.y.accuracy||1}},this.__zoom_opts={max:i.max||0,min:i.min||0,accuracy:i.accuracy||0},this.__events_opts=s,this.__samePointTimeOut=t.samePointTimeOut||1800,n&&(this.__point_opts={size:0<n.size?n.size:5,solid:Boolean(n.solid)}),o)switch(this.__line_opts={color:o.color||"auto",width:o.width||3,animate:o.animate||!1,type:o.type||[4,2]},this.__line_opts.type){case"chain":this.__line_opts.type=[15,3,3,3];break;case"dotted":this.__line_opts.type=[10,10]}this.__sync_ele=t.syncEle},t.prototype.AnimationDraw=function(t,_,e,i){-1!==(t=this.GetAnimationList(_,t,e)).findIndex(t=>!t.reline)&&(Array.prototype.push.apply(this.__animate_queue,t.slice(1)),this.__animate_queue=this.__animate_queue.sort(function(t,_){return t.time-_.time}),this.CreateTimer(_,i))},t.prototype.GetAnimationList=function(e,i,s){var n=this.__function_list[e].animate;t:for(let _=1;_<i.length;_++)if(i[_].reline){let t=_;for(;++t<i.length;){if(!i[t])break t;if(!i[t].reline){i[t+1].prev={x:i[t].pos.x,y:i[t].pos.y},i[t+1].color=this.__function_list[e].color,i[t+1].lineWidth=this.__function_list[e].lineWidth,i[t+1].time=this.__cache_time+s*n+n*_,i.splice(_,t-_+1),t=0;break}}0<t&&i.splice(_,t-_+1)}else i[_].prev={x:i[_-1].pos.x,y:i[_-1].pos.y},i[_].color=this.__function_list[e].color,i[_].lineWidth=this.__function_list[e].lineWidth,i[_].time=this.__cache_time+s*n+n*_;return i},t.prototype.FastDraw=function(i,s){let n=[],o=null,a=this,c=(a.__function_list[i].color,a.__function_list[i].lineWidth,a.__function_list[i].animate),r=0;Array.prototype.push.apply(n,this.__fn_points_list[i]),n=this.GetAnimationList(i,n,0),this.__ctx.moveTo(n[0].pos.x,n[0].pos.y),n.shift(),-1!==n.findIndex(t=>!t.reline)&&(o=window.requestAnimationFrame(function t(_){var e;_>=r&&a.__update_animate_flag&&(e=n.shift(),a.__ctx.beginPath(),a.__ctx.strokeStyle=e.color,a.__ctx.lineWidth=e.lineWidth,a.__ctx.moveTo(e.prev.x,e.prev.y),a.__ctx.lineTo(e.pos.x,e.pos.y),a.__ctx.closePath(),a.__ctx.stroke(),r=_+c),0<n.length&&a.__update_animate_flag?window.requestAnimationFrame(t):(a.__ctx.lineCap="butt",s&&a.DrawPoint(i),window.cancelAnimationFrame(o))}),this.__timers.push(o))},t.prototype.BeginDraw=function(t,e,_,i,s,n){let o=this.__fn_points_list[t],a=this.__function_list[t].animate;if(0!==o.length)if(-1<a&&s)i&&0===a?this.AnimationDraw(o.slice(e,_),t,e,n):this.FastDraw(t,n);else{this.__ctx.strokeStyle=this.__function_list[t].color,this.__ctx.lineWidth=this.__function_list[t].lineWidth,this.__ctx.lineCap="round",this.__ctx.beginPath(),o[e].reline||this.__ctx.moveTo(o[e].pos.x,o[e].pos.y);for(let _=e+1;_<o.length;_++)if(o[_].reline){let t=_;for(;++t<o.length&&o[t];)if(!o[t].reline){this.__ctx.moveTo(o[t].pos.x,o[t].pos.y),o.splice(_,t-_);break}}else this.__ctx.lineTo(o[_].pos.x,o[_].pos.y);this.__ctx.stroke(),this.__ctx.closePath(),this.__ctx.lineCap="butt",n&&this.DrawPoint(t)}},t.prototype.RePrint=function(t){t=t||!1;this.__maximum_point.y[0],this.__maximum_point.y[1];var a,c=this.__cvs_mark_opts.x.line.accuracy,r=this.__cvs_mark_opts.y.line.accuracy,l=this.__cvs_mark_opts.x.accuracy,h=this.__cvs_mark_opts.y.accuracy;for(a in this.__function_list)if(-1==this.__function_list[a].animate||!t){let i=0,s=6e3,n=this.__function_list[a].fn,o=this.__function_list[a].pft;this.__fn_points_list[a]=[];for(let e=this.__maximum_point.x[1];e<this.__maximum_point.x[0];e=function(t,_){var e,i;try{e=t.toString().split(".")[1].length}catch(t){e=0}try{i=_.toString().split(".")[1].length}catch(t){i=0}return(t*(i=Math.pow(10,Math.max(e,i)))+_*i)/i}(e,this.__cvs_accuracy),i++){let t=!1,_=e;if(y_value=n(_),y_value&&"Array"===y_value.__proto__.constructor.name&&(_=y_value[0],y_value=y_value[1]),!Number.isNaN(y_value)&&!Number.isNaN(_)&&"number"==typeof y_value){switch(!0){case!0===y_value:case y_value>h+this.__maximum_point.y[0]:case y_value<this.__maximum_point.y[1]-h:t=!0}this.__fn_points_list[a].push({value:{x:_,y:y_value},pos:{x:this.__start_point[0]+(_-this.__start_point_values[0])/l*c+this.__offset_pos.x,y:this.__start_point[1]-(y_value-this.__start_point_values[1])/h*r+this.__offset_pos.y},reline:t,scale:!1,radius:o(_,y_value)&&this.__point_opts?this.__point_opts.size:0}),i===s&&this.__function_list[a].animate&&(this.BeginDraw(a,i-6e3,i,!1,!0,!0),s+=6e3)}}this.BeginDraw(a,6e3<i?i-6e3:0,this.__fn_points_list[a].length,!0,!0,!0)}},t.prototype.DrawPoint=function(e){if(this.__point_opts&&this.__update_animate_flag){let t=this.__fn_points_list[e],_=this;_.__ctx.strokeStyle;t.forEach(t=>{t.reline&&0<t.radius||t.hidden||(_.__ctx.beginPath(),_.__ctx.strokeStyle=_.__point_opts.solid?"transparent":_.__function_list[e].color,_.__ctx.arc(t.pos.x,t.pos.y,t.radius,0,2*Math.PI,!0),_.__point_opts.solid?_.__ctx.fillStyle=t._color||_.__function_list[e].pointColor||_.__function_list[e].color:_.__ctx.fillStyle=t._color||_.__function_list[e].pointColor||"#ffffff",_.__ctx.fill(),_.__ctx.stroke(),_.__ctx.closePath())})}},t.prototype.TimerAnimate=function(){let e=this;return function t(_){e.__cache_time=_,e.__update_animate_flag&&(_=e.__animate_queue.shift(),e.__ctx.beginPath(),e.__ctx.strokeStyle=_.color,e.__ctx.lineWidth=_.lineWidth,e.__ctx.moveTo(_.prev.x,_.prev.y),e.__ctx.lineTo(_.pos.x,_.pos.y),e.__ctx.closePath(),e.__ctx.stroke()),0<e.__animate_queue.length&&e.__update_animate_flag?window.requestAnimationFrame(t):(window.cancelAnimationFrame(e.__animate_id),e.__key_queue.forEach(function(t){e.DrawPoint(t)}),e.__key_queue.splice(0,e.__key_queue.length),e.__animate_queue.splice(0,e.__animate_queue.length),e.__animate_id=null)}},t.prototype.CreateTimer=function(t,_){-1===this.__key_queue.indexOf(t)&&_&&this.__key_queue.push(t),this.__animate_id||(this.__animate_id=window.requestAnimationFrame(this.TimerAnimate()),this.__timers.push(this.__animate_id))},t.prototype.DrawFunction=function(t,_,e,i,s,n,o,a){switch(i=i||"black",n=n||1.5,o=o&&"function"==typeof o?o:function(){return!1},a=a&&"function"==typeof o?a:null,e){case"quick":e=.1;break;case"middle":e=20;break;case"slow":e=30;break;case"queue":e=0;break;case void 0:e=-1}this.__function_list[t]={color:i,lineWidth:n,fn:_,animate:e,pft:o,tck:a,pointColor:s},this.RePrint()},t.prototype.RemoveFunction=function(t,_){this.__function_list[t]&&(this.__update_animate_flag=!1,this.__timers.forEach(t=>window.cancelAnimationFrame(t)),this.__timers.splice(0,this.__timers.length),delete this.__function_list[t],delete this.__fn_points_list[t],this.Clear(),this.SetBackground(),this.DrawAxis(),this.DrawMark(posX,posY,pos_x_line,pos_y_line),setTimeout(()=>{for(var t in this.__update_animate_flag=!0,this.__fn_points_list)this.BeginDraw(t,0,this.__fn_points_list[t].length,!0,_,!0)},300))},t.prototype.Clear=function(){this.__ctx.clearRect(0,0,this.__cvs_wdt,this.__cvs_hgt)},t.prototype.DrawLine=function(t){let _=null,e=this,i=e.__line_opts.type.reduce((t,_)=>t*_),s=0,n=("auto"===e.__line_opts.color?e.__function_list[t.key]:e.__line_opts).color,o=e.__line_opts.animate?a:new Function;function a(){e.__select_point.scale&&e.__select_point.value.x===t.value.x&&e.__select_point.value.y===t.value.y&&e.__start_point[0]!==t.pos.x&&e.__start_point[1]!==t.pos.y&&t.key===e.__select_point.key?(e.ScalePoint(e.__select_point,radius+.5*radius,0)(0),e.__ctx.setLineDash(e.__line_opts.type),e.__ctx.lineDashOffset=s,e.__ctx.lineWidth=e.__line_opts.width,e.__ctx.beginPath(),e.__ctx.strokeStyle=n,e.__ctx.moveTo(t.pos.x,e.__start_point[1]),e.__ctx.lineTo(t.pos.x,t.pos.y+(0<t.pos.y-e.__start_point[1]?2*-radius-2:2*radius+2)),e.__ctx.moveTo(e.__start_point[0],t.pos.y),e.__ctx.lineTo(t.pos.x+(0<t.pos.x-e.__start_point[0]?2*-radius-2:2*radius+2),t.pos.y),e.__ctx.stroke(),e.__ctx.closePath(),e.__ctx.setLineDash([]),s++,s>i&&(s=0),_=setTimeout(o,10)):clearTimeout(_)}return a},t.prototype.ScalePoint=function(o,a,c){let r=null,l=this,h=Date.now(),p=a+l.__select_point.radius;return function t(_){for(var e in l.__update_animate_flag=!0,l.Clear(),l.SetBackground(),l.DrawAxis(),l.DrawMark(posX,posY,pos_x_line,pos_y_line),l.__fn_points_list)l.BeginDraw(e,0,l.__fn_points_list.length,!0,!1,!1);for(var i in l.__fn_points_list)l.DrawPoint(i);var s,n;l.__select_point.radius<a&&l.__select_point.scale&&0<_?(l.__select_point.radius=(s=Date.now()-h,n=l.__select_point.radius,-p*(s/=c)*(s-2)+n),r=window.requestAnimationFrame(t)):0<_&&(l.DrawLine(o)(),window.cancelAnimationFrame(r))}},t.prototype.BindEvent=function(){const l=this;let a=!1,h={x:0,y:0},p=[l.__start_point[0],l.__start_point[1]];if(ylineWidth=this.__cvs_axis_opts.y.width,xlineWidth=this.__cvs_axis_opts.x.width,x_accuracy=l.__cvs_mark_opts.x.line.accuracy,y_accuracy=l.__cvs_mark_opts.y.line.accuracy,xAccuracy=l.__cvs_mark_opts.x.accuracy,yAccuracy=l.__cvs_mark_opts.y.accuracy,x_line_width=this.__cvs_mark_opts.x.line.width,y_line_width=this.__cvs_mark_opts.y.line.width,posX=0,posY=0,pos_x_line=x_line_width,pos_y_line=y_line_width,timer=null,zoom_accuracy=this.__zoom_opts.accuracy,max_zoom=this.__zoom_opts.max,min_zoom=this.__zoom_opts.min,showTip=-1<this.__events_opts.indexOf("showtip"),radius=l.__point_opts?l.__point_opts.size:0,child_element=null,select_list=[],loop_timer=null,showTip){const n=this.__cvs.parentElement;n.style.position="relative",child_element=document.createElement("div"),child_element.setAttribute("style",'background:rgba(0,0,0,0.7);border-radius: 5px;box-sizing: border-box;padding: 10px;display: flex;overflow: hidden;position: absolute;visibility: hidden;transition: opacity 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, transform 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;pointer-events: none;font: 14px / 21px "Microsoft YaHei";z-index: 9999999;    white-space: nowrap; transform:translate3d(0px, 0px, 0px);'),n.appendChild(child_element)}function _(t){t.preventDefault(),l.__update_animate_flag=!1,l.__timers.forEach(t=>window.cancelAnimationFrame(t)),l.__timers.splice(0,l.__timers.length),h.x=l.__event_type?t.changedTouches[0].pageX:t.offsetX,h.y=l.__event_type?t.changedTouches[0].pageY:t.offsetY,a=!0}function u(t,_,e,i){child_element.innerHTML=`
				<div style="width: 15px;heidivght: 100%;">
					<div style="width: 100%;height: 15px;border-radius: 50%;background-color: ${t};"></div>
				</div>
				<div style="width: calc(100% - 15px);box-sizing: border-box;padding-left:10px;padding-right: 10px;color: #ffffff;overflow: hidden;">
					<div style="vertical-align: middle;line-height: 1;margin-bottom: 10px;word-break: break-all;">
						${_}
					</div>
					<div style="vertical-align: middle;line-height: 1;margin-bottom: 10px;word-break: break-all;">
						x = ${e}
					</div>
					<div style="vertical-align: middle;line-height: 1;word-break: break-all;">
						y = ${i}
					</div>
				</div>
			`}function e(e){if(e.preventDefault(),a){var t,_,i=l.__event_type?e.changedTouches[0].pageX-l.__cvs.offsetLeft:e.offsetX,s=l.__event_type?e.changedTouches[0].pageY-l.__cvs.offsetTop:e.offsetY;l.__offset_move.x+=i-h.x,l.__offset_move.y+=s-h.y,t=p[0]+l.__offset_move.x,_=p[1]+l.__offset_move.y,t>l.__cvs_wdt?(l.__start_point[0]=l.__cvs_wdt-xlineWidth,posX=(t-l.__cvs_wdt)%x_accuracy,l.__start_point_values[0]=parseInt((t-l.__cvs_wdt)/x_accuracy)*xAccuracy*-1):t<0?(l.__start_point[0]=xlineWidth,posX=t%x_accuracy,l.__start_point_values[0]=parseInt(t/x_accuracy)*xAccuracy*-1):(l.__start_point[0]=t,posX=0),_>l.__cvs_hgt?(l.__start_point[1]=l.__cvs_hgt-ylineWidth,posY=(_-l.__cvs_hgt)%y_accuracy,l.__start_point_values[1]=parseInt((_-l.__cvs_hgt)/y_accuracy)*yAccuracy):_<0?(l.__start_point[1]=ylineWidth,posY=_%y_accuracy,l.__start_point_values[1]=parseInt(_/y_accuracy)*yAccuracy):(l.__start_point[1]=_,posY=0),pos_y_line=t>l.__cvs_wdt-x_line_width?-y_line_width:y_line_width,pos_x_line=_<y_line_width?-x_line_width:x_line_width,l.Clear(),l.SetBackground(),l.DrawAxis(),l.DrawMark(posX,posY,pos_x_line,pos_y_line),l.RePrint(!0),l.__offset_pos.x=posX,l.__offset_pos.y=posY,h.x=i,h.y=s}else if(l.__point_opts){for(var n in select_list.forEach(t=>{l.__fn_points_list[t.key][t.index]&&(l.__fn_points_list[t.key][t.index].radius=radius,delete l.__fn_points_list[t.key][t.index].display)}),select_list=[],l.__fn_points_list){var o=l.__fn_points_list[n].findIndex(function(t){return e.offsetX<=t.pos.x+radius+5&&e.offsetX>=t.pos.x-radius-5&&e.offsetY<=t.pos.y+radius+5&&e.offsetY>=t.pos.y-radius-5&&"number"==typeof t.value.x&&0<t.radius});-1<o&&select_list.push({key:n,index:o})}for(var c in l.__fn_points_list){let a=l.__fn_points_list[c].findIndex(function(t){return e.offsetX<=t.pos.x+radius+5&&e.offsetX>=t.pos.x-radius-5&&e.offsetY<=t.pos.y+radius+5&&e.offsetY>=t.pos.y-radius-5&&"number"==typeof t.value.x&&0<t.radius});if(-1<a){if(l.__update_animate_flag=!1,l.__select_point.key===c&&l.__select_point.index===a)return;if(l.__select_point.radius=radius,l.__select_point.scale=!1,l.__select_point=l.__fn_points_list[c][a],l.__select_point.key=c,l.__select_point.index=a,l.__select_point.scale=!0,showTip){clearInterval(loop_timer),child_element.style.visibility="visible",child_element.style.opacity=1;let t=e.offsetX+10,_=l.__cvs_hgt-e.offsetY-20;if(t+child_element.offsetWidth>l.__cvs_wdt&&(t=e.offsetX-child_element.offsetWidth-15),e.offsetY+child_element.offsetHeight+20>l.__cvs_hgt&&(_=l.__cvs_hgt-Math.abs(e.offsetY-child_element.offsetHeight-15)),child_element.style.transform=`translate3d(${t}px, -${_}px, 0px)`,1<select_list.length)loop_timer=setInterval(function(n){let o=0;function t(){let t=n[o].key,_=l.__function_list[t].color,e=l.__select_point.value.x,i=l.__select_point.value.y;var s;l.__function_list[t].tck&&(s=l.__function_list[t].tck(t,_,e,i),_=s.color||_,t=s.key||t,e=s.x||e,i=s.y||i),l.__select_point.radius=radius,l.__select_point.scale=!1,l.__select_point.hidden=!0,l.__select_point=l.__fn_points_list[n[o].key][n[o].index],l.__select_point.key=t,l.__select_point.index=a,l.__select_point.scale=!0,l.__select_point.hidden=!1,l.__timers.push(window.requestAnimationFrame(l.ScalePoint(l.__select_point,radius+.5*radius,3e4))),u(_,t,e,i),o++,o>=select_list.length&&(o=0)}return n.forEach(t=>{l.__fn_points_list[t.key][t.index].radius=radius,l.__fn_points_list[t.key][t.index].scale=!1,l.__fn_points_list[t.key][t.index].hidden=!0}),t(),t}(select_list),l.__samePointTimeOut);else{let t=l.__function_list[c].color,_=l.__select_point.value.x,e=l.__select_point.value.y;var r;l.__function_list[c].tck&&(r=l.__function_list[c].tck(c,t,_,e),t=r.color||t,c=r.key||c,_=r.x||_,e=r.y||e),u(t,c,_,e)}}return void l.__timers.push(window.requestAnimationFrame(l.ScalePoint(l.__select_point,radius+.5*radius,3e4)))}}l.__select_point.scale&&(l.__select_point.scale=!1,l.__select_point.radius=radius,clearInterval(loop_timer),window.requestAnimationFrame(l.ScalePoint(l.__select_point,5,1e3))),l.__select_point={scale:!1,radius:radius,value:{}},l.__select_point.key=l.__select_point.index=null,showTip&&(child_element.style.opacity=0,child_element.style.visibility="hidden")}}function i(t){t.preventDefault(),a=!1,l.__update_animate_flag=!0,l.Clear(),l.SetBackground(),l.DrawAxis(),l.DrawMark(posX,posY,pos_x_line,pos_y_line),l.RePrint()}function s(t){t.preventDefault(),repeat_wheel_flag=!0,0<t.wheelDelta/120?(l.__cvs_mark_opts.x.line.accuracy+=zoom_accuracy,l.__cvs_mark_opts.y.line.accuracy+=zoom_accuracy,l.__cvs_mark_opts.y.line.accuracy>max_zoom&&(l.__cvs_mark_opts.x.line.accuracy=max_zoom,l.__cvs_mark_opts.y.line.accuracy=max_zoom)):(l.__cvs_mark_opts.x.line.accuracy-=zoom_accuracy,l.__cvs_mark_opts.y.line.accuracy-=zoom_accuracy,l.__cvs_mark_opts.y.line.accuracy<min_zoom&&(l.__cvs_mark_opts.x.line.accuracy=min_zoom,l.__cvs_mark_opts.y.line.accuracy=min_zoom)),x_accuracy===l.__cvs_mark_opts.x.line.accuracy&&l.__cvs_mark_opts.y.line.accuracy===y_accuracy||(clearTimeout(timer),l.__update_animate_flag=!1,l.__timers.forEach(t=>window.cancelAnimationFrame(t)),l.__timers.splice(0,l.__timers.length),x_accuracy=l.__cvs_mark_opts.x.line.accuracy,y_accuracy=l.__cvs_mark_opts.y.line.accuracy,l.Clear(),l.SetBackground(),l.DrawAxis(),l.DrawMark(posX,posY,pos_x_line,pos_y_line),timer=setTimeout(function(){l.__update_animate_flag=!0,l.RePrint()},100))}function t(){clearTimeout(timer),l.__cvs.width=l.__sync_ele.offsetWidth||window.innerWidth,l.__cvs.height=l.__sync_ele.offsetHeight||window.innerHeight,l.__cvs_wdt=l.__sync_ele.offsetWidth||window.innerWidth,l.__cvs_hgt=l.__sync_ele.offsetHeight||window.innerHeight,l.__update_animate_flag=!1,l.Clear(),l.SetBackground(),l.DrawAxis(),l.DrawMark(posX,posY,pos_x_line,pos_y_line),timer=setTimeout(function(){l.__update_animate_flag=!0,l.RePrint()},100)}return l.__sync_ele&&l.__sync_ele.addEventListener("resize",t,{capture:!1}),this.__events_opts.forEach(function(t){switch(t){case"draw":l.__cvs.addEventListener(l.__event_type?"touchstart":"mousedown",_,{capture:!1}),l.__cvs.addEventListener(l.__event_type?"touchmove":"mousemove",e,{capture:!1}),window.addEventListener(l.__event_type?"touchend":"mouseup",i,{capture:!1});break;case"zoom":l.__cvs.addEventListener("mousewheel",s,{capture:!1})}}),{destory:function(){l.__cvs.removeEventListener(l.__event_type?"touchstart":"mousedown",_),l.__cvs.removeEventListener(l.__event_type?"touchmove":"mousedown",e),l.__cvs.removeEventListener("mousewheel",s),l.__cvs.removeEventListener("mousedown",e),l.__sync_ele&&l.__sync_ele.removeEventListener("resize",t),window.removeEventListener(l.__event_type?"touchend":"mouseup",i)},change:function(){let t=!1;return function(){l.__cvs.removeEventListener(l.__event_type?"touchstart":"mousedown",_),l.__cvs.removeEventListener(l.__event_type?"touchmove":"mousedown",e),window.removeEventListener(l.__event_type?"touchend":"mouseup",i),l.__cvs.removeEventListener("mousedown",e),t?(l.__select_point={scale:!1,radius:radius,value:{}},l.__select_point.key=l.__select_point.index=null,showTip&&(child_element.style.opacity=0,child_element.style.visibility="hidden"),l.__cvs.addEventListener(l.__event_type?"touchstart":"mousedown",_,{capture:!1}),l.__cvs.addEventListener(l.__event_type?"touchmove":"mousemove",e,{capture:!1}),window.addEventListener(l.__event_type?"touchend":"mouseup",i,{capture:!1})):l.__cvs.addEventListener("mousedown",e,{capture:!1}),t=!t}}()}},t.prototype.Destory=function(){this.__event_turn_off.destory(),this.__update_animate_flag=!1,this.__timers.forEach(function(t){window.cancelAnimationFrame(t)}),this.__timers.splice(0,this.__timers.length),this.Clear(),setTimeout(()=>this.__cvs=this.__ctx=null)},t.prototype.ChangeTouch=function(){this.__event_type&&this.__event_turn_off.change()},t.prototype.Init=function(t,_){if(!(t instanceof HTMLCanvasElement))throw"Invaild Canvas Element";this.ParseParams(_),this.__cvs=t,this.__ctx=t.getContext("2d"),this.__cvs_wdt=t.offsetWidth,this.__cvs_hgt=t.offsetHeight,this.__start_point=[parseInt(t.offsetWidth/2),parseInt(t.offsetHeight/2)],this.__start_point_values=[0,0],this.__maximum_point={x:[0,0],y:[0,0]},this.__function_list={},this.__select_point={},this.__animate_id=null,this.__cache_time=0,this.__animate_queue=[],this.__fn_points_list={},this.__offset_move={x:0,y:0},this.__offset_pos={x:0,y:0},this.__update_animate_flag=!0,this.__timers=[],this.__key_queue=[],this.__event_type="ontouchstart"in document.documentElement,this.SetBackground(),this.DrawAxis(),this.DrawMark(0,0,this.__cvs_mark_opts.x.line.width,this.__cvs_mark_opts.y.line.width),this.__event_turn_off=this.BindEvent()},t});